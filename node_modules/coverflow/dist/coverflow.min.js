!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.coverflow=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){module.exports=require("./lib/coverflow.js")},{"./lib/coverflow.js":2}],2:[function(require,module){"use strict";function initialize(e,t){for(t=t||{},pressed=!1,oldActiveIndex=0,timeConstant=t.timeConstant||250,tapMaxConstant=t.tapMaxConstant||150,offset=target=0,reference=amplitude=velocity=frame=void 0,angle=t.angle||-60,dist=t.angle||-150,shift=t.shift||10,onActiveClick=t.onActiveClick||function(){},onChange=t.onChange||function(){},e="string"==typeof e?document.getElementById(e):e,count=e.children.length,images=[];images.length<count;)images.push(e.children.item(images.length));var n=0,i=0,a=t.tagName||images[0].tagName;images.map(function(e,t){e.onclick=function(e){flowTo(t),e.preventDefault(),e.stopPropagation()},n=n>e.scrollHeight?n:e.scrollHeight,i=i>e.style.width?i:e.style.width}),n=t.maxHeight||n,i=t.maxWidth||i,e.className+=" coverflow",e.style.height=1.1*n,createStyleSheet(a,n,i),images.map(function(e){n=n>e.scrollHeight?n:e.scrollHeight,i=i>e.scrollWidth?i:e.scrollWidth}),viewHeight=1.1*n,dim=i,view=e,scroll(offset),setupEvents(e)}function setupEvents(){document.addEventListener("keydown",handleKey),window.addEventListener("resize",scroll),view&&("undefined"!=typeof window.ontouchstart&&(view.addEventListener("touchstart",tap),view.addEventListener("touchmove",drag),view.addEventListener("touchend",release),view.addEventListener("touchcancel",release)),addWheelListener(view,wheel),view.addEventListener("mousedown",tap),view.addEventListener("mousemove",drag),view.addEventListener("mouseup",release))}function unmount(){document.removeEventListener("keydown",handleKey),window.removeEventListener("resize",scroll)}function wheel(e){e.deltaY>0?setActive(getActiveIndex()+1):e.deltaY<0&&setActive(getActiveIndex()-1),changed(getActiveIndex())}function xpos(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function wrap(e){return e>=count?e%count:0>e?wrap(count+e%count):e}function scroll(e){var t,n,i,a,r,o,s;for(offset="number"==typeof e?e:offset,center=Math.floor((offset+dim/2)/dim),i=offset-center*dim,a=0>i?1:-1,r=-a*i*2/dim,s="translateX("+(view.clientWidth-dim)/2+"px) ",s+="translateY("+(viewHeight-dim)/2+"px)",o=images[wrap(center)],o&&(o.style[xform]=s+" translateX("+-i/2+"px) translateX("+a*shift*r+"px) translateZ("+dist*r+"px) rotateY("+a*angle*r+"deg)",o.style.zIndex=0,o.style.opacity=1),n=count>>1,t=1;n>=t;++t)o=images[wrap(center+t)],o&&(o.style[xform]=s+" translateX("+(shift+(dim*t-i)/2)+"px) translateZ("+dist+"px) rotateY("+angle+"deg)",o.style.zIndex=-t,o.style.opacity=t===n&&0>i?1-r:1),o=images[wrap(center-t)],o&&(o.style[xform]=s+" translateX("+(-shift+(-dim*t-i)/2)+"px) translateZ("+dist+"px) rotateY("+-angle+"deg)",o.style.zIndex=-t,o.style.opacity=t===n&&i>0?1-r:1);o=images[wrap(center)],o&&(o.style[xform]=s+" translateX("+-i/2+"px) translateX("+a*shift*r+"px) translateZ("+dist*r+"px) rotateY("+a*angle*r+"deg)",o.style.zIndex=0,o.style.opacity=1)}function track(){var e,t,n,i;e=Date.now(),t=e-timestamp,timestamp=e,n=offset-frame,frame=offset,i=1e3*n/(1+t),velocity=.8*i+.2*velocity}function autoScroll(){var e,t;amplitude&&(e=Date.now()-timestamp,t=amplitude*Math.exp(-e/timeConstant),t>4||-4>t?(scroll(target-t),requestAnimationFrame(autoScroll)):(scroll(target),changed(getActiveIndex())))}function tap(e){return pressed=!0,reference=xpos(e),velocity=amplitude=0,frame=offset,timestamp=Date.now(),starttimestamp=timestamp,clearInterval(ticker),ticker=setInterval(track,50),"mousedown"==e.type&&e.preventDefault(),e.stopPropagation(),"mousedown"==e.type?!1:void 0}function drag(e){var t,n;return pressed&&(t=xpos(e),n=reference-t,(n>2||-2>n)&&(reference=t,scroll(offset+n))),e.preventDefault(),e.stopPropagation(),!1}function release(e){if(pressed=!1,clearInterval(ticker),target=offset,timestamp=Date.now(),velocity>10||-10>velocity)return amplitude=.9*velocity,target=offset+amplitude,target=Math.round(target/dim)*dim,amplitude=target-offset,requestAnimationFrame(autoScroll),e.preventDefault(),e.stopPropagation(),!1;if(timestamp-starttimestamp>tapMaxConstant)return target=Math.round(target/dim)*dim,amplitude=target-offset,requestAnimationFrame(autoScroll),e.preventDefault(),e.stopPropagation(),!1;var t=Math.round(target/dim)*dim;amplitude=t-target,target=t,requestAnimationFrame(autoScroll)}function handleKey(e){return pressed||target!==offset||([32,34,39,40].indexOf(e.which)>=0&&(target=offset+dim),[33,37,38].indexOf(e.which)>=0&&(target=offset-dim),offset===target)?void 0:(amplitude=target-offset,timestamp=Date.now(),requestAnimationFrame(autoScroll),!0)}function flowTo(e){var t=getActiveIndex();if(e!=t){var n;return n=e-t>(count-1)/2?e-t-count:-(count-1)/2>=e-t?e-t+count:e-t,target=offset+n*dim,amplitude=target-offset,timestamp=Date.now(),requestAnimationFrame(autoScroll),!0}onActiveClick(t)}function setActive(e){target=dim*e,scroll(dim*e)}function getActiveIndex(){for(var e=center%count;0>e;)e+=count;return e}function getActiveElement(){return images[getActiveIndex()]}function getActiveId(){return images[getActiveIndex()].id}function changed(e){oldActiveIndex!=e&&(onChange(e,oldActiveIndex),oldActiveIndex=e)}require("./raf.lib.js"),require("./wheelEvent.lib.js");var count,images,dim,offset,center,angle,dist,shift,pressed,reference,amplitude,target,velocity,timeConstant,xform,frame,timestamp,ticker,oldActiveIndex,starttimestamp,tapMaxConstant,onActiveClick,onChange,view,viewHeight,createStyleSheet=require("./createStyleSheet.js");xform="transform",["webkit","Moz","O","ms"].every(function(e){var t=e+"Transform";return"undefined"!=typeof document.body.style[t]?(xform=t,!1):!0}),module.exports={initialize:initialize,flowTo:flowTo,setActive:setActive,getActiveId:getActiveId,getActiveElement:getActiveElement,getActiveIndex:getActiveIndex,unmount:unmount}},{"./createStyleSheet.js":3,"./raf.lib.js":4,"./wheelEvent.lib.js":5}],3:[function(require,module){module.exports=function(e,t,o){var r=document.createElement("style"),p="    .coverflow {        overflow: hidden;        perspective: 1000px;        -webkit-perspective: 1000px;        transform-style: preserve-3d;        -webkit-transform-style: preserve-3d;    }        .coverflow > "+e+" {"+(t?"   height : "+t+"px;":"")+(o?"   width : "+o+"px;":"")+"   position: absolute;        top: 0;        left: 0;        opacity: 0;        border: none;    }  ";r.appendChild(document.createTextNode(p)),document.head.appendChild(r)}},{}],4:[function(){!function(e){for(var n=0,a=["webkit","moz"],t=e.requestAnimationFrame,i=e.cancelAnimationFrame,m=a.length;--m>=0&&!t;)t=e[a[m]+"RequestAnimationFrame"],i=e[a[m]+"CancelRequestAnimationFrame"];t&&i||(t=function(e){var a=+Date.now(),t=Math.max(n+16,a);return setTimeout(function(){e(n=t)},t-a)},i=clearTimeout),e.requestAnimationFrame=t,e.cancelAnimationFrame=i}(window)},{}],5:[function(){!function(e,t){function l(t,l,r,u){t[n](a+l,"wheel"==o?r:function(t){!t&&(t=e.event);var l={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==o?(l.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(l.deltaX=-1/40*t.wheelDeltaX)):l.deltaY=t.detail,r(l)},u||!1)}var n,o,a="";e.addEventListener?n="addEventListener":(n="attachEvent",a="on"),o="onwheel"in t.createElement("div")?"wheel":void 0!==t.onmousewheel?"mousewheel":"DOMMouseScroll",e.addWheelListener=function(e,t,n){l(e,o,t,n),"DOMMouseScroll"==o&&l(e,"MozMousePixelScroll",t,n)}}(window,document)},{}]},{},[1])(1)});